<section class="relative overflow-hidden mb-lg">
  <div class="max-w-7xl mx-auto px-md sm:px-lg lg:px-xl relative z-10">
    <div class="relative text-center py-8 md:py-12">
      <img
        src="/assets/illustrations/inferior.png"
        alt=""
        aria-hidden="true"
        loading="lazy"
        class="hidden lg:block absolute top-1/2 -left-14 w-14 -translate-y-1/2 opacity-50 transform-gpu animate-float"
      />
      <img
        src="/assets/illustrations/superior.png"
        alt=""
        aria-hidden="true"
        loading="lazy"
        class="hidden lg:block absolute top-1/2 -right-14 w-14 -translate-y-1/2 opacity-50 transform-gpu animate-float-delay"
      />

      <h1 class="text-3xl md:text-4xl font-bold text-text mb-2">Questions & Réponses</h1>
      <p class="text-text/70 max-w-2xl mx-auto">
        Retrouvez ici les réponses claires et précises aux questions les plus fréquentes.
      </p>
    </div>
  </div>
</section>

<section class="max-w-7xl mx-auto px-md pb-lg">
  <div
    class="max-w-4xl mx-auto bg-white rounded-lg shadow-card overflow-hidden border border-slate-200/50"
    role="list"
  >
    @for (item of filtered; track item.id) {
    <article
      class="block border-b border-slate-200/50 last:border-b-0 cursor-pointer transition-all duration-200 ease-out group focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2"
      role="group"
      tabindex="0"
      (click)="onArticleClick($event, item.id)"
      (keydown)="onArticleKeydown($event, item.id)"
      [attr.aria-labelledby]="'q-' + item.id"
      id="{{ 'article-' + item.id }}"
    >
      <header
        class="flex justify-between items-start gap-md p-md md:p-lg transition-colors group-hover:bg-primary-pastel/40"
        role="button"
        aria-expanded="{{ isOpen(item.id) }}"
        [attr.aria-controls]="'qa-' + item.id"
      >
        <h3 id="{{ 'q-' + item.id }}" class="text-lg font-bold text-text">
          {{ item.question }}
        </h3>

        <div class="flex-shrink-0 pt-1" aria-hidden="true">
          <span
            class="chev text-slate-500 transition-transform duration-300 ease-in-out"
            [class.rotate-180]="isOpen(item.id)"
            [class.text-primary]="isOpen(item.id)"
            >▾</span
          >
        </div>
      </header>

      <div
        id="{{ 'qa-' + item.id }}"
        class="grid grid-rows-[0fr] transition-[grid-template-rows] duration-400 ease-out"
        [class.grid-rows-[1fr]]="isOpen(item.id)"
        [attr.aria-hidden]="!isOpen(item.id)"
      >
        <div class="overflow-hidden">
          <div class="px-md md:px-lg pb-lg text-text/80">
            <p [innerHTML]="item.answer"></p>
          </div>
        </div>
      </div>
    </article>
    }
  </div>

  <section class="mt-lg max-w-3xl mx-auto" role="region" aria-labelledby="faq-cta-title">
    <div
      class="bg-white rounded-lg shadow-card p-lg flex flex-col md:flex-row items-center gap-lg text-center md:text-left"
    >
      <div class="flex-shrink-0 relative">
        <img src="/assets/logo.png" alt="GDG Kivu" class="h-20 w-20" loading="lazy" />
      </div>

      <div class="flex-grow">
        <h3 id="faq-cta-title" class="text-xl font-bold text-text mb-sm">
          Vous n’avez pas trouvé la réponse ?
        </h3>
        <p class="text-text/70 mb-md text-sm">
          Contactez-nous par e-mail — nous vous répondrons rapidement. Pour les demandes presse ou
          partenariats, précisez l'objet dans votre message.
        </p>

        <div class="flex gap-md justify-center md:justify-start">
          <a
            class="btn btn-primary btn-md"
            href="mailto:aksantibahiga3@gmail.com"
            aria-label="Contacter GDG Kivu"
          >
            Contacter GDG Kivu
          </a>
          <a class="btn btn-ghost btn-md" href="/speakers" aria-label="Voir la page Speakers">
            Voir speakers
          </a>
        </div>
      </div>
    </div>
  </section>
</section>

<style>
  /* On ne garde que les animations et le style du chevron, 
     tout le reste est maintenant géré par les classes Tailwind et les variables globales. */

  /* chevron icon style */
  .chev {
    display: inline-block;
    font-size: 20px;
    font-weight: bold; /* pour un meilleur rendu */
    transform-origin: 50% 50%;
  }

  /* float animations for decorative imagery */
  @keyframes float {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-8px);
    }
  }
  .animate-float {
    animation: float 5s ease-in-out infinite;
  }
  .animate-float-delay {
    animation: float 5s ease-in-out infinite;
    animation-delay: 2s;
  }

  /* reduced motion respect */
  @media (prefers-reduced-motion: reduce) {
    .animate-float,
    .animate-float-delay,
    .transition-all,
    .transition-transform,
    .transition-colors,
    .transition-\[grid-template-rows\] {
      transition: none !important;
      animation: none !important;
    }
  }
</style>
